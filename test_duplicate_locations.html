<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–π</title>
    <meta charset="UTF-8">
    <style>
        table { border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .highlight { background-color: #fff3cd; }
        .success { color: #155724; background-color: #d4edda; padding: 10px; border-radius: 5px; }
        .warning { color: #856404; background-color: #fff3cd; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>–¢–µ—Å—Ç –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–π</h1>
    
    <div class="warning">
        <h3>üö® –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞:</h3>
        <p>–†–∞–Ω–µ–µ —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–≤–∞–ª–∞ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∑–∞–ø–∏—Å–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–π –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –º–µ—Å—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞" —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑).</p>
    </div>

    <h2>–¢–µ—Å—Ç–æ–≤—ã–π Excel —Ñ–∞–π–ª:</h2>
    <table>
        <thead>
            <tr>
                <th>A: ‚Ññ</th>
                <th>B: –ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                <th>C: –ï–¥.–∏–∑–º. –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</th>
                <th>D: –í–∏–¥ –∑–∞—Ç—Ä–∞—Ç</th>
                <th>E: –ï–¥.–∏–∑–º. –¥–µ—Ç–∞–ª–∏</th>
                <th>F: –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>–û—Ç–¥–µ–ª–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</td>
                <td>–º¬≤</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr class="highlight">
                <td></td>
                <td></td>
                <td></td>
                <td>–û—Ç–¥–µ–ª–∫–∞ –ø–æ–ª–æ–≤</td>
                <td>–º¬≤</td>
                <td>–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞</td>
            </tr>
            <tr class="highlight">
                <td></td>
                <td></td>
                <td></td>
                <td>–ü–æ–∫—Ä–∞—Å–∫–∞ —Å—Ç–µ–Ω</td>
                <td>–º¬≤</td>
                <td>–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞</td>
            </tr>
            <tr class="highlight">
                <td></td>
                <td></td>
                <td></td>
                <td>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ—Ç–æ–ª–∫–æ–≤</td>
                <td>–º¬≤</td>
                <td>–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞</td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td>–û—Ç–¥–µ–ª–∫–∞ –ø–æ–ª–æ–≤</td>
                <td>–º¬≤</td>
                <td>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–º–µ—â–µ–Ω–∏—è</td>
            </tr>
        </tbody>
    </table>
    
    <p><em>–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è "–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞" –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –≤ 3 —Å—Ç—Ä–æ–∫–∞—Ö</em></p>

    <div class="success">
        <h3>‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ:</h3>
        <ol>
            <li><strong>–¢–æ—á–Ω—ã–π –ø–æ–∏—Å–∫ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–π:</strong> –°–æ–∑–¥–∞–Ω —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á <code>country|region|city</code> –¥–ª—è –∫–∞–∂–¥–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏</li>
            <li><strong>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º:</strong> –°–∏—Å—Ç–µ–º–∞ —Å–Ω–∞—á–∞–ª–∞ –∏—â–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é —Å —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–º–∏ –∂–µ –ø–æ–ª—è–º–∏</li>
            <li><strong>–£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ –ø–æ–∏—Å–∫–∞:</strong> –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ <code>locationMap</code> –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∫–ª—é—á–∞–º –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞</li>
            <li><strong>–¢–æ—á–Ω—ã–π SQL-–∑–∞–ø—Ä–æ—Å:</strong> –ü—Ä–∏ –ø–æ–∏—Å–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è <code>eq</code> –≤–º–µ—Å—Ç–æ <code>or</code> –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ</li>
        </ol>
    </div>

    <h2>–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞:</h2>
    <ul>
        <li><strong>–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è "–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞"</strong> –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –û–î–ò–ù —Ä–∞–∑</li>
        <li><strong>3 –≤–∏–¥–∞ –∑–∞—Ç—Ä–∞—Ç</strong> –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∑–∞–ø–∏—Å—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ "–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞"</li>
        <li><strong>–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–º–µ—â–µ–Ω–∏—è"</strong> –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å</li>
        <li><strong>–ò—Ç–æ–≥–æ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–π:</strong> 2 (–Ω–µ 4, –∫–∞–∫ –±—ã–ª–æ –±—ã –ø—Ä–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–∏)</li>
    </ul>

    <h2>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:</h2>
    <pre><code>
// –°—Ç–∞—Ä—ã–π –∫–æ–¥ (—Å–æ–∑–¥–∞–≤–∞–ª –¥—É–±–ª–∏):
const selectResult = await supabase
  .from('location')
  .select('*')
  .or(`country.eq.${country},city.eq.${city}`) // ‚ùå –ù–µ—Ç–æ—á–Ω—ã–π –ø–æ–∏—Å–∫
  .limit(1);

// –ù–æ–≤—ã–π –∫–æ–¥ (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏):
const existingLocation = locations.find(l => 
  (l.country || '') === (locationData.country || '') &&
  (l.region || '') === (locationData.region || '') &&
  (l.city || '') === (locationData.city || '')         // ‚úÖ –¢–æ—á–Ω—ã–π –ø–æ–∏—Å–∫
);
    </code></pre>

    <div class="success">
        <h3>üéØ –¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç:</h3>
        <p>–û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è, –∞ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤–∏–¥–æ–≤ –∑–∞—Ç—Ä–∞—Ç.</p>
    </div>
</body>
</html>