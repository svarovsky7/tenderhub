# üî¥ –ö–ê–ö –û–ë–ù–û–í–ò–¢–¨ –ö–≠–® –°–•–ï–ú–´ –í SUPABASE

## –ü—Ä–æ–±–ª–µ–º–∞
PostgREST (API —Å–ª–æ–π Supabase) –∫—ç—à–∏—Ä—É–µ—Ç —Å—Ö–µ–º—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ –≤–∏–¥–∏—Ç –Ω–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏.

## –†–ï–®–ï–ù–ò–ï (–≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ –ø–æ—Ä—è–¥–∫—É):

### –®–ê–ì 1: –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫
```sql
-- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞:
-- supabase/migrations/add_missing_columns.sql
```

### –®–ê–ì 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ PostgREST —Å–µ—Ä–≤–µ—Ä

#### –°–ø–æ—Å–æ–± A: –ß–µ—Ä–µ–∑ Dashboard (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø) ‚úÖ
1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://app.supabase.com)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –°–ª–µ–≤–∞ –≤ –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Settings** (–ù–∞—Å—Ç—Ä–æ–π–∫–∏)
4. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **API**
5. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **Service Status**
6. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **Restart Server** (–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä)
7. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30-60 —Å–µ–∫—É–Ω–¥

#### –°–ø–æ—Å–æ–± B: –ß–µ—Ä–µ–∑ SQL (–µ—Å–ª–∏ —Å–ø–æ—Å–æ–± A –Ω–µ –ø–æ–º–æ–≥)
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ SQL Editor:

-- 1. –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ç–∞–±–ª–∏—Ü—ã (—ç—Ç–æ —Ñ–æ—Ä—Å–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
COMMENT ON TABLE public.work_material_links IS 
'–°–≤—è–∑–∏ –º–µ–∂–¥—É —Ä–∞–±–æ—Ç–∞–º–∏ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏. –û–±–Ω–æ–≤–ª–µ–Ω–æ: ' || NOW()::text;

-- 2. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–∏–≥–Ω–∞–ª –Ω–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É
NOTIFY pgrst, 'reload schema';

-- 3. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∞ (—Ä–∞–¥–∏–∫–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±)
REVOKE ALL ON public.work_material_links FROM authenticated;
GRANT SELECT, INSERT, UPDATE, DELETE ON public.work_material_links TO authenticated;
```

### –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∫–∞
–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ SQL Editor:
```sql
-- –¢–µ—Å—Ç–æ–≤–∞—è –≤—Å—Ç–∞–≤–∫–∞
INSERT INTO work_material_links (
    client_position_id,
    work_boq_item_id,
    material_boq_item_id,
    material_quantity_per_work,
    usage_coefficient
) 
SELECT 
    cp.id,
    w.id,
    m.id,
    1.5,
    2.0
FROM client_positions cp
CROSS JOIN LATERAL (
    SELECT id FROM boq_items WHERE item_type = 'work' AND client_position_id = cp.id LIMIT 1
) w
CROSS JOIN LATERAL (
    SELECT id FROM boq_items WHERE item_type = 'material' AND client_position_id = cp.id LIMIT 1
) m
LIMIT 1
ON CONFLICT (work_boq_item_id, material_boq_item_id) DO NOTHING;

-- –ï—Å–ª–∏ –≤—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, –∑–Ω–∞—á–∏—Ç –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
```

### –®–ê–ì 4: –í –±—Ä–∞—É–∑–µ—Ä–µ
1. –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É: **Ctrl + F5** (–∏–ª–∏ Cmd + Shift + R –Ω–∞ Mac)
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–≤—è–∑–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª —Å —Ä–∞–±–æ—Ç–æ–π

## –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –º–µ—Ä—ã:
1. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã** - –∏–Ω–æ–≥–¥–∞ –∫—ç—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–µ —Å—Ä–∞–∑—É
2. **–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ** - —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**:
   - Supabase Dashboard ‚Üí Logs ‚Üí API logs
   - –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ API

### –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:
–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, –≤–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–æ:
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π dev —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
2. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à npm: `npm cache clean --force`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å: `npm run dev`

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏:
–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:
- Supabase Discord: https://discord.supabase.com
- Supabase Support: support@supabase.io

---

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã –í–°–ï–ì–î–ê –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å PostgREST —Å–µ—Ä–≤–µ—Ä!