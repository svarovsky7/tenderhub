# Установка и настройка TenderHub

## 1. Подготовка базы данных Supabase

### Создание проекта
1. Перейдите на https://supabase.com
2. Создайте новый проект
3. Скопируйте URL проекта и анонимный ключ

### Выполнение SQL скрипта
1. Откройте SQL Editor в Supabase Dashboard
2. Выполните SQL скрипт из файла `database/schema.sql`
3. Убедитесь, что все таблицы созданы успешно

### Настройка Row Level Security (RLS)
RLS политики уже включены в SQL скрипт и обеспечивают:
- Изоляцию данных по организациям
- Контроль доступа на уровне ролей
- Безопасность для мультитенантной архитектуры

## 2. Настройка переменных окружения

Скопируйте файл `.env.local` и заполните правильные значения:

```bash
# Ваши данные из Supabase Dashboard
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key_here
```

## 3. Установка зависимостей

```bash
npm install
```

## 4. Запуск приложения

```bash
npm run dev
```

Приложение будет доступно по адресу: http://localhost:5173

## 5. Первоначальная настройка

### Регистрация администратора
1. Откройте приложение
2. Нажмите "Регистрация" 
3. Заполните форму и выберите роль "Администратор"
4. После регистрации войдите в систему

### Заполнение справочников
1. Перейдите в "Библиотеки" → "Материалы"
2. Добавьте основные материалы с ценами
3. Перейдите в "Библиотеки" → "Работы"  
4. Добавьте виды работ с расценками

### Создание тендера
1. На главной странице нажмите "Создать тендер"
2. Заполните основную информацию
3. Перейдите к созданию ВОР и добавьте позиции

## 6. Структура проекта

```
src/
├── components/          # React компоненты
│   ├── auth/           # Авторизация
│   └── layout/         # Макет приложения
├── contexts/           # React контексты
├── lib/
│   └── supabase/       # Настройки Supabase
├── pages/              # Страницы приложения
├── types/              # TypeScript типы
└── utils/              # Утилиты
```

## 7. Основные возможности

### Роли пользователей
- **Администратор**: Полный доступ ко всем функциям
- **Инженер**: Создание/редактирование тендеров, ВОР, справочников
- **Только просмотр**: Доступ к просмотру данных

### Функционал
1. **Регистрация и авторизация** с ролями
2. **Управление тендерами** с созданием ВОР
3. **Справочники материалов** с ценами и единицами измерения
4. **Справочники работ** с расценками и категориями
5. **Создание ВОР** с выбором из справочников или ручным вводом
6. **Автоматический расчет сумм** в ведомости объемов работ

## 8. Тестирование

Для тестирования функционала:
1. Создайте несколько материалов в справочнике
2. Создайте несколько видов работ
3. Создайте тендер
4. Добавьте строки ВОР, используя справочники
5. Проверьте автоматический расчет сумм

## Решение проблем

### Ошибки подключения к базе данных
- Проверьте правильность URL и ключей в `.env.local`
- Убедитесь, что SQL скрипт выполнен полностью
- Проверьте настройки RLS в Supabase

### Проблемы с авторизацией
- Убедитесь, что включена email authentication в Supabase
- Проверьте настройки Auth в проекте Supabase

### Ошибки в консоли браузера
- Проверьте корректность API ключей
- Убедитесь, что все зависимости установлены
- Перезапустите dev server